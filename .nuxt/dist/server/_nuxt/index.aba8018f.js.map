{"version":3,"file":"index.aba8018f.js","sources":["../../../../node_modules/.pnpm/@unhead+ssr@1.2.2/node_modules/@unhead/ssr/dist/index.mjs"],"sourcesContent":["import { TagsWithInnerContent, SelfClosingTags, computeHashes } from '@unhead/shared';\n\nfunction propsToString(props) {\n  const handledAttributes = [];\n  for (const [key, value] of Object.entries(props)) {\n    if (value === false || value == null)\n      continue;\n    let attribute = key;\n    if (value !== true)\n      attribute += `=\"${String(value).replace(/\"/g, \"&quot;\")}\"`;\n    handledAttributes.push(attribute);\n  }\n  return handledAttributes.length > 0 ? ` ${handledAttributes.join(\" \")}` : \"\";\n}\n\nfunction encodeInnerHtml(str) {\n  return str.replace(/[&<>\"'/]/g, (char) => {\n    switch (char) {\n      case \"&\":\n        return \"&amp;\";\n      case \"<\":\n        return \"&lt;\";\n      case \">\":\n        return \"&gt;\";\n      case '\"':\n        return \"&quot;\";\n      case \"'\":\n        return \"&#x27;\";\n      case \"/\":\n        return \"&#x2F;\";\n      default:\n        return char;\n    }\n  });\n}\nfunction tagToString(tag) {\n  const attrs = propsToString(tag.props);\n  const openTag = `<${tag.tag}${attrs}>`;\n  if (!TagsWithInnerContent.includes(tag.tag))\n    return SelfClosingTags.includes(tag.tag) ? openTag : `${openTag}</${tag.tag}>`;\n  let content = String(tag.innerHTML || \"\");\n  if (tag.textContent)\n    content = encodeInnerHtml(String(tag.textContent));\n  return SelfClosingTags.includes(tag.tag) ? openTag : `${openTag}${content}</${tag.tag}>`;\n}\n\nfunction ssrRenderTags(tags) {\n  const schema = { htmlAttrs: {}, bodyAttrs: {}, tags: { head: [], bodyClose: [], bodyOpen: [] } };\n  for (const tag of tags) {\n    if (tag.tag === \"htmlAttrs\" || tag.tag === \"bodyAttrs\") {\n      schema[tag.tag] = { ...schema[tag.tag], ...tag.props };\n      continue;\n    }\n    schema.tags[tag.tagPosition || \"head\"].push(tagToString(tag));\n  }\n  return {\n    headTags: schema.tags.head.join(\"\\n\"),\n    bodyTags: schema.tags.bodyClose.join(\"\\n\"),\n    bodyTagsOpen: schema.tags.bodyOpen.join(\"\\n\"),\n    htmlAttrs: propsToString(schema.htmlAttrs),\n    bodyAttrs: propsToString(schema.bodyAttrs)\n  };\n}\n\nasync function renderSSRHead(head) {\n  const beforeRenderCtx = { shouldRender: true };\n  await head.hooks.callHook(\"ssr:beforeRender\", beforeRenderCtx);\n  if (!beforeRenderCtx.shouldRender) {\n    return {\n      headTags: \"\",\n      bodyTags: \"\",\n      bodyTagsOpen: \"\",\n      htmlAttrs: \"\",\n      bodyAttrs: \"\"\n    };\n  }\n  const ctx = { tags: await head.resolveTags() };\n  if (head.resolvedOptions.experimentalHashHydration) {\n    ctx.tags.push({\n      tag: \"meta\",\n      props: {\n        name: \"unhead:ssr\",\n        content: computeHashes(\n          ctx.tags.filter((t) => {\n            const entry = head.headEntries().find((entry2) => entry2._i === t._e);\n            return entry?.mode !== \"server\";\n          }).map((tag) => tag._h)\n        )\n      }\n    });\n  }\n  await head.hooks.callHook(\"ssr:render\", ctx);\n  const html = ssrRenderTags(ctx.tags);\n  const renderCtx = { tags: ctx.tags, html };\n  await head.hooks.callHook(\"ssr:rendered\", renderCtx);\n  return renderCtx.html;\n}\n\nexport { encodeInnerHtml, propsToString, renderSSRHead, ssrRenderTags, tagToString };\n"],"names":[],"mappings":"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"}